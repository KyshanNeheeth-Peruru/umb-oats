{% extends 'base_bootstrapped.html' %}

{% block title %}Availability{% endblock %}
{% block top_heading %}
    <h1 class="h3 mb-0 text-gray-900">Enter Availability</h1>
{% endblock %}
{% block content %}

    {% if user.is_authenticated %}

        <section>
            <form method="POST">
                {% csrf_token %}
                {% if request.user.is_superuser %}
                    {{ form.as_p }}
                {% else %}
                    <p>
                        <label for="{{ form.tutor.id_for_label }}">Tutor:</label>
                        {{ request.user.tutor }}
                    </p>
                    <p>
                        <label for="{{ form.date.id_for_label }}">Date:</label>
                        {{ form.date }}
                    </p>
                    <p>
                        <label for="{{ form.timeblock.id_for_label }}">Time block:</label>
                        {{ form.timeblock }}
                    </p>
                    <p>
                        <label for="{{ form.course.id_for_label }}">Course:</label>
                        {{ form.course }}
                    </p>
                    <p>
                        <label for="{{ form.status_for_label }}">Status:</label>
                        {{ form.status }}
                    </p>
                    <p>
                        <label for="{{ form.semester_for_label }}">Semester:</label>
                        {{ form.semester }}
                    </p>
                {% endif %}
                <button type="submit" class="btn btn-primary">Set availability</button>
            </form>


        </section>

    {% endif %}
    <script>
        function setSemester() {
            var date = new Date(document.getElementById('id_date').value);
            var month = date.getMonth() + 1;
            var year = date.getFullYear();
            var semester;

            if (month >= 1 && month <= 4) {
                semester = 'SPRING ' + year;
            } else if (month >= 5 && month <= 8) {
                semester = 'SUMMER ' + year;
            } else if (month >= 9 && month <= 12) {
                semester = 'FALL ' + year;
            } else {
                semester = 'SPRING ' + year; // default to Spring if current month is invalid
            }

            document.getElementById('id_semester').value = semester;
        }
    </script>

{% endblock %}